<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CIARA app</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />
    <link rel="icon" href="/favicon.png" type="image/png">

    <meta property="og:title" content="ciara-game-explorer" />
    <meta property="og:description" content="Lovable Generated Project" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    
    <!-- GitHub Pages SPA Redirect - Fixed -->
    <script type="text/javascript">
      // Fixed Single Page Apps for GitHub Pages
      (function(l) {
        // Handle the standard GitHub Pages redirect (/?/route)
        if (l.search[1] === '/' ) {
          var decoded = l.search.slice(1).split('&').map(function(s) { 
            return s.replace(/~and~/g, '&')
          }).join('?');
          
          // Extract the route from the decoded path
          var routePath = decoded.split('?')[0];
          var queryParams = decoded.split('?').slice(1).join('?');
          
          // Build the correct URL for React Router
          var finalUrl = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
            routePath + (queryParams ? '?' + queryParams : '') + l.hash;
          
          console.log('SPA redirect - Original:', l.href);
          console.log('SPA redirect - Decoded route:', routePath);
          console.log('SPA redirect - Query params:', queryParams);
          console.log('SPA redirect - Final URL:', finalUrl);
          
          window.history.replaceState(null, null, finalUrl);
        }
        
        // Handle direct route access (like /reset-password)
        var path = l.pathname;
        if (path !== '/' && path !== '/index.html') {
          console.log('Direct route access detected:', path);
          
          // Special handling for reset-password route
          if (path === '/reset-password' || path.startsWith('/reset-password')) {
            console.log('Reset password route detected, redirecting...');
            
            // Redirect to the SPA format with parameters preserved
            var newUrl = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
              '/?/' + path.slice(1) +
              (l.search ? '&' + l.search.slice(1) : '') +
              l.hash;
            
            console.log('Redirecting to:', newUrl);
            window.location.replace(newUrl);
            return;
          }
          
          // For other routes, redirect to SPA format
          var redirectUrl = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
            '/?/' + path.slice(1) +
            (l.search ? '&' + l.search.slice(1) : '') +
            l.hash;
          
          console.log('Redirecting to:', redirectUrl);
          window.location.replace(redirectUrl);
        }
      }(window.location))
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
